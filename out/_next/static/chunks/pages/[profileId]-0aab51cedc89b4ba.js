(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[880],{5726:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[profileId]",function(){return l(3039)}])},3039:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSP:function(){return T},default:function(){return _}});var s=l(5893),a=l(4654),r=l(7294),i=l(8318),n=l(1752),o=l(9274),c=l(6100),d=l(6650),m=l(5675),u=l.n(m),f=l(1121),h=l(8633),x=l(5007),p=l(7632),w=l(3181);let b={activeTabLink:"font-bold text-[0.95rem] px-4 flex justify-center items-center text-medium w-full  min-w-max relative before:absolute before:top-[1.8rem] before:left-[25%] before:content-[''] before:w-[50%] before:h-[2px] before:bg-[#1d9bf0]",tabLink:"font-light  min-w-max px-4 text-medium"};var g=e=>{let{user:t,followLoading:l,userType:a,follow:i,currentUser:m}=e,[g,v]=(0,r.useState)("tweets"),j=(0,x.I0)(),N=async e=>{e.preventDefault();let l=e.target.files[0];if(l){var s;if("coverImage"===e.target.name&&t.coverImage){let e=await (0,d.sd)((0,d.iH)(n.tO,t.coverImage));e&&await (0,d.oq)((0,d.iH)(n.tO,e.fullPath))}else if("profileImage"===e.target.name&&(null==t?void 0:null===(s=t.avatar)||void 0===s?void 0:s.indexOf("lh3.googleusercontent.com"))===-1&&t.avatar){let e=await (0,d.sd)((0,d.iH)(n.tO,t.avatar));e&&await (0,d.oq)((0,d.iH)(n.tO,e.fullPath))}let a=(0,d.iH)(n.tO,"coverImage"===e.target.name?"coverImage/"+(0,p.Z)():"profileImage/"+(0,p.Z)());if(await (0,d.KV)(a,l)){let l=await (0,d.Jt)(a);l&&("coverImage"===e.target.name?await (0,c.r7)((0,c.JU)(n.ZP,"users",t.email),{coverImage:l}):await (0,c.r7)((0,c.JU)(n.ZP,"users",t.email),{avatar:l}))}}await j((0,o.u)(m.email)),document.activeElement.blur()};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{backgroundImage:"url(".concat(t.coverImage?t.coverImage:"",")")},className:"w-full  min-w-max  object-cover select-none bg-cover bg-no-repeat flex relative bg-slate-800 h-48",children:[a&&(0,s.jsx)("div",{className:"w-9 h-9  select-none shadow-lg bottom-2 bg-black/30  transition-all duration-200 hover:bg-black/70 flex items-center justify-center right-2 rounded-full absolute overflow-hidden",children:(0,s.jsxs)("label",{htmlFor:"cover_img",children:[(0,s.jsx)("div",{className:" w-full h-full",children:(0,s.jsx)(f.a$n,{size:25})}),(0,s.jsx)("input",{type:"file",onChange:N,accept:"image/*",name:"coverImage",id:"cover_img",hidden:!0})]})}),(0,s.jsx)("div",{className:t.nftVerified?"w-36 h-36 select-none  rounded-full absolute top-[50%] overflow-hidden left-3 smallHex":"w-36 h-36 select-none  rounded-full  absolute top-[50%] overflow-hidden left-3",children:(0,s.jsxs)("label",{htmlFor:"prof_img",children:[(0,s.jsx)("div",{className:"relative w-36 h-36 bg-slate-800 hover:border-2 hover:border-slate-500/30",children:t.avatar&&(0,s.jsx)(u(),{sizes:"full",fill:!0,priority:!0,src:t.avatar,alt:"Profile Image"})}),a&&(0,s.jsx)("input",{type:"file",onChange:N,accept:"image/*",name:"profileImage",id:"prof_img",hidden:!0})]})}),a&&(0,s.jsx)("span",{className:"right-4 border rounded-3xl py-1 px-3 border-[#38444d]/60 hover:bg-[#191919]/60 transition-all  bottom-[-3rem] absolute",children:"Edit Profile"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"w-full mt-10 p-7 text-lg font-semibold",children:[(0,s.jsxs)("h2",{className:"flex gap-1 items-center",children:[t.nftVerified&&(0,s.jsx)(h.RyI,{color:"#Ffd700"}),t.verifiedNormal&&(0,s.jsx)(h.RyI,{color:"#1DA1F2"}),t.firstName," ",t.lastName]}),(0,s.jsx)("p",{className:"text-sm text-slate-400 font-normal",children:t.customId}),(0,s.jsxs)("p",{className:"text-[0.9rem] mt-5 flex gap-1 items-center text-slate-400 font-normal",children:[(0,s.jsx)(f.wo9,{})," Joined"," ",new Date(1e3*t.timestamp.seconds).toLocaleDateString(void 0,{year:"numeric",month:"long"})]}),(0,s.jsxs)("p",{className:"text-[0.9rem] mt-[-0.4rem] flex gap-1 items-center text-slate-400 font-normal",children:[(0,s.jsxs)("span",{children:[t.followers.length," Followers"]}),(0,s.jsxs)("span",{children:[t.followings.length," Followings"]})]})]}),!a&&(m.followings.includes(t.email)?(0,s.jsx)("div",{onClick:i,className:l?"mr-10 select-none pointer-events-none cursor-pointer border rounded-3xl py-1 px-3 border-blue-400/60 bg-gray-900/60 transition-all":"mr-10 select-none cursor-pointer border rounded-3xl py-1 px-3 border-blue-400/60 bg-blue-500 hover:bg-blue-400/60 transition-all",children:l?(0,s.jsx)(w.epG,{size:15,color:"#ffffff",className:"animate-spin"}):"Followed"}):(0,s.jsxs)("div",{onClick:i,className:l?"mr-10 select-none pointer-events-none cursor-pointer border rounded-3xl py-1 px-3 border-blue-400/60 bg-gray-900/60 transition-all":"mr-10 select-none cursor-pointer border rounded-3xl py-1 px-3 border-blue-400/60 hover:bg-blue-500 bg-blue-400/60 transition-all",children:[" ",l?(0,s.jsx)(w.epG,{size:15,color:"#ffffff",className:"animate-spin"}):"Follow"]}))]}),(0,s.jsxs)("div",{className:"flex w-full  min-w-max  gap-1 border-b-2 border-[#38444d]/60",children:[(0,s.jsx)("div",{onClick:e=>{v(e.currentTarget.childNodes[0].textContent.toLowerCase())},className:"w-full flex justify-center  transition-all   items-center h-[3rem] cursor-pointer hover:bg-[#191919]",children:(0,s.jsx)("span",{className:"tweets"===g?b.activeTabLink:b.tabLink,children:"Tweets"})}),(0,s.jsx)("div",{onClick:e=>{v(e.currentTarget.childNodes[0].textContent.toLowerCase())},className:"w-full flex justify-center transition-all   items-center h-[3rem] cursor-pointer hover:bg-[#191919]",children:(0,s.jsx)("span",{className:"tweets & replies"===g?b.activeTabLink:b.tabLink,children:"Tweets & Replies"})}),(0,s.jsx)("div",{onClick:e=>{v(e.currentTarget.childNodes[0].textContent.toLowerCase())},className:"w-full flex justify-center transition-all   items-center h-[3rem] cursor-pointer hover:bg-[#191919]",children:(0,s.jsx)("span",{className:"media"===g?b.activeTabLink:b.tabLink,children:"Media"})}),(0,s.jsx)("div",{onClick:e=>{v(e.currentTarget.childNodes[0].textContent.toLowerCase())},className:"w-full flex justify-center transition-all   items-center h-[3rem] cursor-pointer hover:bg-[#191919]",children:(0,s.jsx)("span",{className:"likes"===g?b.activeTabLink:b.tabLink,children:"Likes"})})]})]})},v=l(1163),j=l(4242),N=l(8908),k=e=>{let{getRequestedUser:t,user:l,userType:a}=e,d=(0,v.useRouter)(),m=(0,x.v9)(e=>e.logedinUser.data),[u,f]=(0,r.useState)([]),[h,p]=(0,r.useState)([]),[w,b]=(0,r.useState)(!1),k=(0,x.I0)(),[y,I]=(0,r.useState)(!0),[C,L]=(0,r.useState)(!1),P=async e=>{b(!0),(m||Object.keys(m).length>0)&&(l.followers.includes(m.email)&&m.followings.includes(l.email)?(await (0,c.r7)((0,c.JU)(n.ZP,"users",l.email),{followers:(0,c.Ab)(m.email)}),await (0,c.r7)((0,c.JU)(n.ZP,"users",m.email),{followings:(0,c.Ab)(l.email)})):(await (0,c.r7)((0,c.JU)(n.ZP,"users",l.email),{followers:(0,c.vr)(m.email)}),await (0,c.r7)((0,c.JU)(n.ZP,"users",m.email),{followings:(0,c.vr)(l.email)}))),t(l.email),await k((0,o.u)(m.email)),b(!1),document.activeElement.blur()};return(0,r.useEffect)(()=>{(async()=>{I(!0),await (0,c.cf)((0,c.IO)((0,c.hJ)(n.ZP,"posts"),(0,c.ar)("postOwner","==",l.email),(0,c.Xo)("timestamp","desc")),async e=>f(e.docs.map(e=>e.data()))),await (0,c.cf)((0,c.hJ)(n.ZP,"users"),async e=>p(await e.docs.map(e=>e.data()))),I(!1)})().then(e=>e)},[]),(0,s.jsxs)("div",{className:"col-span-9  sm:col-span-7 lg:col-span-5 min-w-fit border-r will-change-scroll border-l border-[#38444d]/60 sticky top-0 h-screen min-h-full scroll-smooth scrollbar-hide overflow-y-auto",children:[(0,s.jsxs)("div",{className:"".concat("sticky right-0 left-0 bg-black/70 m-0 min-w-max  backdrop-contrast-75 backdrop-brightness-75   border-b border-[#38444d]/60  top-0 backdrop-blur z-10"," flex gap-2 p-1 items-center"),children:[(0,s.jsx)("span",{className:"font-bold text-[1.2rem] rounded-full w-9 h-9 hover:bg-[#191919] flex justify-center items-center",onClick:e=>{e.preventDefault(),d.back()},children:(0,s.jsx)(i.O8Q,{})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("span",{className:"text-xl font-semibold",children:[l.firstName," ",l.lastName]}),(0,s.jsxs)("span",{className:"text-sm",children:[l.tweets.length," Tweets"]})]})]}),(0,s.jsx)(g,{followLoading:w,follow:P,userType:a,user:l,currentUser:m}),y?(0,s.jsx)(N.j8h,{color:"#1DA1F2",size:"30",className:"text-center w-full mt-20 animate-spin"}):u.map((e,t)=>{let l=h.find(t=>t.email===e.postOwner);if(e&&l)return(0,s.jsx)(j.Z,{displayName:null==l?void 0:l.firstName,username:null==l?void 0:l.customId,text:null==e?void 0:e.tweetMessage,userId:l.customId,avatar:null==l?void 0:l.avatar,timestamp:null==e?void 0:e.timestamp,tweetmedia:null==e?void 0:e.tweetImage,likesCount:null==e?void 0:e.likesCount,likes:e.likes,tweetId:e.tweetId,commentsCount:null==e?void 0:e.commentsCount,isProfileImageNFT:null==l?void 0:l.nftVerified,isVerified:null==l?void 0:l.verifiedNormal},t)})]})},y=l(6664),I=l(3299),C=l(9008),L=l.n(C);let P={wrapper:"lg:max-w-7xl m-auto flex items-center justify-center h-screen bg-[#00000] text-white overflow-hidden",content:"grid grid-cols-9 w-full"};var T=!0,_=e=>{let t="@"+(0,v.useRouter)().query.profileId,l=(0,x.I0)(),i=(0,x.v9)(e=>e.logedinUser.data),[d,m]=(0,r.useState)(null),{data:u}=(0,I.useSession)(),[f,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{i&&0!==i.length||(async()=>await l((0,o.u)(u.user.email)))()},[l,u,i]),(0,r.useEffect)(()=>{(async()=>{let e=(await (0,c.PL)((0,c.IO)((0,c.hJ)(n.ZP,"users"),(0,c.ar)("customId","==",t)))).docs[0].data();e&&(await m(e),h(!1))})().then(e=>e)},[t]);let p=async e=>{let t=(await (0,c.PL)((0,c.IO)((0,c.hJ)(n.ZP,"users"),(0,c.ar)("email","==",e)))).docs[0].data();t&&(await m(t),h(!1))};return(0,s.jsx)(s.Fragment,{children:f?(0,s.jsx)("div",{className:P.wrapper,children:(0,s.jsx)(N.j8h,{color:"#1DA1F2",size:"30",className:"text-center animate-spin"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(L(),{children:[(0,s.jsxs)("title",{children:[d.firstName+" "+d.lastName+" ("+d.customId.replace("@","")+") ","/ Twitter (Clone)"]}),(0,s.jsx)("meta",{charSet:"UTF-8"}),(0,s.jsx)("link",{rel:"shortcut icon",href:"https://abs.twimg.com/favicons/twitter.2.ico"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width,  initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0"}),(0,s.jsx)("meta",{name:"description",content:"This is Twitter Clone Application Made for Learning and Fun Anything Done Related to this not under our control"}),(0,s.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"ie=edge"})]}),(0,s.jsx)("main",{className:P.wrapper,children:(0,s.jsxs)("div",{className:P.content,children:[(0,s.jsx)(y.Z,{user:i,activeLink:t===i.customId?"Profile":""}),(0,s.jsxs)("div",{className:" will-change-scroll grid grid-cols-9 col-span-9 sm:col-span-7 h-screen overflow-auto scroll-smooth scrollbar-hide",children:[(0,s.jsx)(k,{user:d,getRequestedUser:p,userType:t===i.customId?"owner":null}),(0,s.jsx)(a.Z,{})]})]})})]})})}}},function(e){e.O(0,[365,660,510,909,738,317,817,594,648,321,838,665,307,698,951,373,33,888,774,179],function(){return e(e.s=5726)}),_N_E=e.O()}]);